# 실행 컨텍스트

실행 컨텍스트는 식별자를 등록하고 관리하는 스코프와 코드 실행 순서 관리를 구현한 내부 메커니즘이다.  
JavaScript 엔진이 코드를 평가할 때 생성된다.  
실행 컨텍스트는 크게 렉시컬 환경과 실행 컨텍스트 스택(콜 스택)으로 구성되어있다.

![실행컨텍스트](img/blog/context.png)

## 1. 렉시컬 환경

렉시컬 환경은 식별자와 스코프를 관리한다.

`{key: 값}` 객체 형태의 렉시컬 스코프를 생성하여  
key에 식별자를 등록하고 식별자 key에 바인딩된 값과 같이 관리한다.

렉시컬 환경은 2개의 컴포넌트로 다시 나뉜다.

#### 환경 레코드

식별자에 바인딩된 값을 관리하는 컴포넌트 (저장소)

#### 외부 렉시컬 환경에 대한 참조

상위 코드의 렉시컬 환경(= 상위 스코프)를 가리키는 컴포넌트.  
이를 통해 스코프 체인을 구현한다.

![렉시컬 환경](img/blog/lexical.png)

## 2. 실행 컨텍스트 스택 (콜 스택)

실행 컨텍스트 스택은 코드의 실행 순서를 관리한다.  
코드가 실행되는 시간의 흐름에 따라 실행 컨텍스트 스택에 실행 컨텍스트가 추가(push)되고 제거(pop)된다.

전역 코드 평가와 실행 -> 지역 코드 평가와 실행 -> 상위 코드로 복귀
를 반복한다.

전역 실행 컨텍스트까지 실행 컨텍스트 스택에서 제거되면 실행 컨텍스트 스택에는 아무것도 남아있지 않게 된다.

![실행 컨텍스트 스택](img/blog/callstack.png)
