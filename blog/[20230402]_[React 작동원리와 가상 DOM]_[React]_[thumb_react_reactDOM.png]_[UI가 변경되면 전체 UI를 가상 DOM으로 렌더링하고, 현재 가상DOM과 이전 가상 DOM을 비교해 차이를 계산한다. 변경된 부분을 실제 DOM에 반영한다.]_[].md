# 1. React란

## React

사용자 인터페이스 구축을 위한 JavaScript 라이브러리.  
전적으로 Client 사이드 JavaScript 코드로,  
대규모의 React 프로젝트를 구축하려면 라우팅에 필요한 라이브러리, 인증에 필요한 라이브러리 등을 추가해야한다.

### React가 관리하는 것

#### 컴포넌트

React는 JSX 코드를 평가할 때마다 컴포넌트 함수들을 호출한다.

#### 상태 객체

#### 다른 객체의 상태

### React가 관리하지 않는 것

- React는 브라우저와 관계가 없다.
- 컴포넌트에 HTML 요소들이 포함되어있는지는 관여하지 않는다.
  -> React DOM에게 판단을 맡긴다.
- 화면에 표시되어야 할 정보 모두는 현재 사용중인 인터페이스,
  -> 즉 React DOM에 전달한다.

---

# 2. React 작동 원리

<img width="600" src="https://miro.medium.com/max/700/1*8OCCATi8_5HmWI1QpjrRNA.png" />

> UI가 변경되면 전체 UI를 가상 DOM으로 렌더링하고, 현재 가상DOM과 이전 가상 DOM을 비교해 차이를 계산한다. 변경된 부분을 실제 DOM에 반영한다.

### 2-1. 컴포넌트 재평가, 재실행

상태(props, state, Context 등)가 변경될 때 컴포넌트가 재평가된다.  
React에 의해 컴포넌트 함수를 재실행한다.

#### 컴포넌트 재실행에 대한 오해

1. 컴포넌트가 재평가, 재실행된다고 실제DOM이 재렌더링되는 것은 아니다.
2. 자식 컴포넌트 내의 상태가 변경되지 않아도  
   부모 컴포넌트 함수가 재실행되면 자식 컴포넌트 함수도 재실행된다.  
   (단, 자식 컴포넌트가 재실행된다고 실제 DOM이 변경된다는 것은 아니다.)  
   React.memo를 사용하면 이와 같은 상황에서 불필요한 자식 컴포넌트 함수의 재실행을 막을 수 있다.

### 2-2. 가상 DOM을 통해 컴포넌트 변경 전후 확인

컴포넌트 이전 스냅샷과 현재 스냅샷을 가상으로 비교하여 차이점을 알아낸다.

#### 가상 DOM (virtual DOM)

가상 DOM은 컴포넌트 트리의 현재 모양(현재 스냅샷)과 바뀌어야 하는 최종 모양(최종 스냅샷)을 결정한다.

##### 가상 DOM의 장점

현재 스냅샷과 최종 스냅샷 비교를 **메모리 안에서만 발생시켜서 성능 측면에서 자원이 적게 든다.**
실제 DOM을 사용하면, 성능 측면에서 자원이 많이 필요하다. (성능 부하 = 페이지 느려짐)

##### 가상 DOM의 단점

비교 방식을 사용할 경우, 변경 사항을 식별하기 위해 모든 단계를 거쳐야 한다.  
 개발 과정에서 사소한 변경 사항이 굉장히 많이 일어나는 것을 볼 수 있고, 이렇게 UI의 각 요소를 비교하는 일은 오버헤드이다.

#### React DOM

React DOM은 웹에 대한 인터페이스를 담당한다.  
컴포넌트에 HTML 요소가 있는지, 허구 요소는 없는지 판단 후  
실제 HTML 요소를 화면에 표시해준다.
가상DOM과의 비교를 통해 **현재 스냅샷과 최종 스냅샷을 실제 DOM에 전달한다.**

### 2-3. 실제 DOM 렌더링

컴포넌트 이전 상태와 현재 상태간의 차이점이 있을 때만 실제DOM이 업데이트된다.

#### 실제 DOM

실제 DOM은 브라우저에 직접 렌더링하는 일을 담당한다.
가상 DOM과의 비교를 통해 필요할 때만 렌더링한다.
